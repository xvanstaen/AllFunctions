
<body>

<div style="margin-top:10px; background-color: rgb(130, 187, 187); margin-left:20px;">
    <div class="skipLine"></div>
    <div class="quest">
        <span class="aLabel"> Do you want to retrieve Performance files</span>
        <button class="sizeButtons" id="PerfYes" (click)="onActionPerf($event)">Yes</button>
        <button class="sizeButtons" id="PerfNo" (click)="onActionPerf($event)">No</button>
    </div>

    <div class="skipLine"></div>

    <div class="quest" >
        <span class="aLabel"> Do you want to retrieve a Circuit</span>
        <button class="sizeButtons" id="CircuitYes" (click)="onActionPerf($event)">Yes</button>
        <button class="sizeButtons" id="CircuitNo" (click)="onActionPerf($event)">No</button>
    </div>
    <div class="skipLine"></div>
</div>

    <div *ngIf="isPerfRetrieved===true">
        <app-performance-sport   [configServer]="configServer" [identification]="identification" [credentials]="credentials"
        (returnPerf)="onSelectPerf($event)" [isPerfRetrieved]="isPerfRetrieved">
        </app-performance-sport>
    </div>  

    <div *ngIf="selectionCircuit===true">
        <app-manage-circuits [configServer]="configServer" [identification]="identification" [credentials]="credentials"
        (returnCircuit)="onSelectCircuit($event)" [selectionCircuit]="selectionCircuit">
        </app-manage-circuits>
    </div>  
 
    <div  class="quest" style="width:580px; margin-left:20px; background-color: cyan;" *ngIf="isSpecificCircuitReceived===true || filePerf.length>0"  >
        <div class="skipLine"></div>
        <span style="width:100%; display:inline-block; text-align: center; "> You have selected</span>
        <span *ngIf="isSpecificCircuitReceived===true" class="aLabel" style="padding:15px;"> Circuit </span><span style="color:blue; font-weight: bold;" >{{specificCircuit.name}} </span>
        <span  *ngIf="filePerf.length>0"class="aLabel"  style="padding:15px;"> Performance file </span><span style="color:blue; font-weight: bold;" >{{nameFilePerf}}</span>
        <div class="skipLine"></div>
        <div class="quest"  *ngIf="isSpecificCircuitReceived===true && filePerf.length>0">
            <span class="aLabel"> Do you want to calculate the performance of your activity?</span>
            <button class="sizeButtons" id="CircuitYes" (click)="onCalculatePerf()">Yes</button>
            <button class="sizeButtons" id="CircuitNo" >No</button>
        </div>
        <div class="skipLine"></div>
    </div>
    <div class="skipLine"></div> 
    
    <div   style=" margin-left:20px; " *ngIf="tabCircuit.length>0 && perfTotalCircuit.length>0">
        <table  [ngStyle]="{'width.px':(perfTotalCircuit[0].newLoop.length)*80+200}" > 
            <thead>
                <tr>
                    <th class="tabH"  style="width:200px; ">Section </th>
                    <th class="tabH"  *ngFor="let tab of perfTotalCircuit[0].newLoop; let i=index" >Loop#{{i+1}} </th>
                </tr>
            </thead>
        </table>
        <div  >
            <table  [ngStyle]="{'width.px':(perfTotalCircuit[0].newLoop.length)*80+200}" > 
                <thead>
                    <tr>
                        <th class="tabH" style="width:200px; " >Section </th>
                        <th class="tabH"  *ngFor="let tab of perfTotalCircuit[0].newLoop; let i=index" >Loop#{{i+1}} </th>
                    </tr>
                </thead>
                <tbody *ngFor="let tab of perfCircuit; let i=index" [ngClass]=" {'backSubTot': i ===nbItemsLoop, 'backEven': i !==nbItemsLoop && i % 2 ===0, 'backOdd': i !==nbItemsLoop && i % 2 !==0}"  >
                    <tr >
                        <td class="tabRow" style="text-align:center;">{{tab.newLoop[0].fromTo}} </td>
                        <td class="tabH"  *ngFor="let sub of perfCircuit[i].newLoop; let j=index">
                            <span style="text-align:center; " *ngIf="sub.perfRecordFrom!==0" >{{sub.perfRecordFrom}}<br>{{sub.perfRecordTo}}</span>
                        </td>
                        
                    </tr>
                    <tr >
                        <td class="tabRow" style="text-align:right; padding-right:10px;">Time (sec)</td>
                        <td class="tabH" *ngFor="let sub of perfCircuit[i].newLoop; let j=index">
                        <span >{{sub.theTime}} </span></td> 
                    </tr>
                    <tr >
                        <td class="tabRow" style="text-align:right; padding-right:10px;">Time</td>
                        <td class="tabH"  *ngFor="let sub of perfCircuit[i].newLoop; let j=index">
                        <span  >{{sub.strTime}}</span> </td>
                    </tr>
                    <tr >
                        <td class="tabRow" style="text-align:right;  padding-right:10px;">Distance (km)</td>
                        <td class="tabH" *ngFor="let sub of perfCircuit[i].newLoop; let j=index" >
                        <span >{{sub.dist  | number:'1.1-3'}} </span>
                    </td>
                    </tr>
                    <tr >
                        <td class="tabRow" style="text-align:right;  padding-right:10px;">Speed (km/h)</td>
                        <td class="tabH" *ngFor="let sub of perfCircuit[i].newLoop; let j=index" >
                        <span  >{{sub.speed  | number:'1.1-2'}} </span></td>
                    </tr>
                </tbody>
            </table>
            <div class="skipLine"></div>
            
        </div>
        <div *ngIf="perfTotalCircuit.length>0">
            <table [ngStyle]="{'width.px':(perfTotalCircuit[0].newLoop.length)*80+200}" style="background-color:blue; color:white;">
                <thead>
                    <tr>
                        <th class="tabH" style="background-color:blue; color:white;  border:solid 1px white;" >TOTAL CIRCUIT</th>
                        <th class="tabH" style="width:80px; background-color:blue; color:white;  border:solid 1px white;" *ngFor="let tab of perfTotalCircuit[0].newLoop; let i=index" >Loop#{{i+1}} </th>
                    </tr>
                </thead>
                <tbody *ngFor="let tab of perfTotalCircuit; let i=index">
                    
                    <tr  *ngIf="i===0">
                        <td class="tabRow" style="text-align:right;  padding-right:10px;background-color:blue; color:white;  border:solid 1px white;">Time</td>
                        <td class="tabH"  style="background-color:blue; color:white;  border:solid 1px white;" *ngFor="let sub of perfTotalCircuit[i].newLoop; let j=index">
                        <span >{{sub.theTime}} sec - {{sub.strTime}}</span></td> 
                    </tr>
                    <tr  *ngIf="i===0">
                        <td class="tabRow" style="text-align:right;  padding-right:10px;background-color:blue; color:white; border:solid 1px white;">Dist & Speed</td>
                        <td class="tabH"  style="background-color:blue; color:white;  border:solid 1px white;" *ngFor="let sub of perfTotalCircuit[i].newLoop; let j=index">
                        <span >{{sub.dist  | number:'1.1-3'}} km - {{sub.speed  | number:'1.1-2'}} km/h</span></td> 
                    </tr>
                </tbody>

            </table>
        </div>
    </div>
   <div id="bottomPage"></div>
   <div style="display:block; height:30px;">&nbsp;</div>
</body>