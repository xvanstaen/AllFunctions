
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<div style="margin-top:40px;"></div>
<div *ngIf="dictionaryOnly===true">
<app-dictionary [configServer]="configServer" [identification]="identification" [XMVConfig]="XMVConfig" ></app-dictionary>
</div>
<div *ngIf="dictionaryOnly===false">
    
<div *ngIf="EventHTTPReceived[0]===true && isCreateRecipeName===false && isRecipeModified===false && theListOfObjects.length>1" style="min-width:400px; max-width:500px; margin-top:5px;" >
    <div class="objectHeader" style="margin-left:10px; font-size:14px; width:96%; display:inline-block;">Select the type of recipe(s)</div>
    <!--
            <div   *ngFor="let listFile of theListOfObjects; let i=index" >
                    <div style="list-style-type: none; ">
                            <input   *ngIf="recordRecipe===i" class="radioButton" (click)='RadioSelection($event)' type="radio"  name="theRadio" id="{{i}}" value="Y"  checked>
                            <input   *ngIf="recordRecipe!==i" class="radioButton" (click)='RadioSelection($event)' type="radio"  name="theRadio" id="{{i}}" value="N"  >
                            <div  [ngClass]="{'even': i % 2 === 0, 'odd':i % 2 !== 0}"   class=" object" style="margin-left:10px; padding-top:-25px;" ><span style="margin-left:15px;" >{{i+1}} - {{listFile.name}}</span></div>
          
                    </div>
                  
            </div>   
    -->
    <!--
        <div   *ngFor="let listFile of theListOfObjects; let i=index" >
                
            <div *ngIf="i % 2=== 0" style="margin-left:10px; " > 
                    <div   class="listObj"   [ngClass]="{'even1': i % 4 === 0 , 'even2': i % 4 === 2 }"> 
                        <div style="padding-left:15px; width:100%; display:inline-block; " [ngClass]="{'listObjSel':i===radioSelect}"  (click)='RadioSelection($event)' 
                                id="listA-{{i}}" >{{i+1}} - {{listFile.name}}</div>
                    </div>
                    <div  *ngIf=" i < theListOfObjects.length-2"  class="listObj"   [ngClass]="{'even2': (i + 1) % 4 === 1 , 'even1': (i + 1) % 4 === 3}"> 
                        <div style="padding-left:15px; width:100%; display:inline-block;  " [ngClass]="{'listObjSel':i+1===radioSelect}"  (click)='RadioSelection($event)' 
                                id="listB-{{i+1}}" >{{i+2}} - {{theListOfObjects[i+1].name}}</div>
                    </div>
                </div>  

        </div>    
    -->
</div>
    

<div *ngIf="EventHTTPReceived[0]===true  && recipeFile.listTypeRecipe.length>1" style="min-width:400px; max-width:500px; margin-top:5px;" >
    <div style ="margin-left:10px; width:96%; display:inline-block; color:blue; background-color: lightgrey; border:solid 1px blue;">
        <div class="flag " (click)="selLanguage('FR')"> <span><img   style="width:20px; height:20px; margin:7px;"  src="./assets/FlagFrance.png" ></span></div>
        <div class="flag" (click)="selLanguage('UK')"> <span><img   style="width:20px; height:20px; margin:7px;"  src="./assets/FlagUK.png" ></span></div>
    </div>

    <div class="objectHeader" style="margin-left:10px; font-size:14px; width:96%; display:inline-block;">Select the type of recipe(s)
    
    </div>
    <div style="margin-left:10px; ">
        <div   class="listObj even2" > 
            <div style="padding-left:15px; width:100%; display:inline-block; " [ngClass]="{'listObjSel':selectedTypeFr==='ALL'}"  (click)='RadioSelection($event)' 
                        id="TypeAll" >0 - 
                        <span *ngIf="yourLanguage==='FR'"  (click)='RadioSelection($event)' 
                        id="TypeAll">Tous (d√©faut)</span>
                        <span *ngIf="yourLanguage==='UK'"  (click)='RadioSelection($event)' 
                        id="TypeAll">All (default)</span>
            </div>
            
        </div>
    </div>
    <div   *ngFor="let listType of recipeFile.listTypeRecipe; let i=index" >
            
        <div *ngIf="i % 2=== 0" style="margin-left:10px; " > 
            <div   class="listObj"   [ngClass]="{'even1': i % 4 === 0 , 'even2': i % 4 === 2 }"> 
                <div style="padding-left:15px; width:100%; display:inline-block; " [ngClass]="{'listObjSel':i===radioSelect}"  (click)='RadioSelection($event)' 
                            id="TypeA-{{i}}" >{{i+1}} - 
                            <span *ngIf="yourLanguage==='FR'" (click)='RadioSelection($event)' 
                            id="TypeA-{{i}}"> {{listType.Fr.trim()}} </span>
                            <span *ngIf="yourLanguage==='UK'" (click)='RadioSelection($event)' 
                            id="TypeA-{{i}}"> {{listType.En.trim()}} </span>
                </div>
            </div>
            <div  *ngIf=" i < recipeFile.listTypeRecipe.length-1"  class="listObj"   [ngClass]="{'even2': (i + 1) % 4 === 1 , 'even1': (i + 1) % 4 === 3}"> 
                <div style="padding-left:15px; width:100%; display:inline-block;  " [ngClass]="{'listObjSel':i+1===radioSelect}"  (click)='RadioSelection($event)' 
                            id="TypeB-{{i+1}}" >{{i+2}} - 
                            <span *ngIf="yourLanguage==='FR'" (click)='RadioSelection($event)' 
                            id="TypeB-{{i+1}}"> {{recipeFile.listTypeRecipe[i+1].Fr.trim()}} </span>
                            <span *ngIf="yourLanguage==='UK'" (click)='RadioSelection($event)' 
                            id="TypeB-{{i+1}}"> {{recipeFile.listTypeRecipe[i+1].En.trim()}} </span>
                </div>
            </div>
        </div>  
    </div>  
    <button id='but_2' class="sizeButtons" (click)="onRefresh()"> Refresh</button> 
</div>

<div *ngIf="EventHTTPReceived[1]===true" style=" margin-left:10px; width:94%; max-width:650px; margin-top:20px;" >
    <div id="posDivBeforeTitle"></div>

    <!-- ====== SEARCH RECIPE ====== -->
   
        <span style="color:blue; font-size:14px; width:60px; margin-left:10px;"> Search recipe </span>
        <input type="text" [value]="textToSearch" id='search' (input)="searchText($event)" (click)="searchText($event)"
            style="margin-left:10px; width:120px; height:25px; color:blue; ">
        <button id='cancel' class="sizeButtons" style="margin-left:10px;" (click)="searchText($event)" >Cancel</button>
        <div class="skipLine">&nbsp;</div>
        <li *ngFor="let tab of tabSearch; let m=index;" class="recipeStraight-options " 
                        [ngClass]=" {'colorEven': m % 2 ===0, 'colorOdd': m % 2 !==0}" 
                        (click)="afterDropDown($event)" id="selText-{{m}}" >
                        <span *ngIf="m % 3 ===0" (click)="afterDropDown($event)" id="selText-{{m}}"  >{{tab.name}}   </span>
                        <span *ngIf="m % 3 ===1" (click)="afterDropDown($event)" id="selText-{{m}}"  >{{tab.name}}   </span>
                        <span *ngIf="m % 3 ===2" (click)="afterDropDown($event)" id="selText-{{m}}"  >{{tab.name}}   </span>
                        <!--
                        <span *ngIf="m % 4 ===3" id="selText-{{m}}" style=" color:green;">{{tab}}   </span>
                        -->
                    </li>
       

    
    <div class="skipLine">&nbsp;</div>
    <!-- ====== SAVE/CANCEL MODIFICATION OF RECIPE ====== -->
    <div *ngIf="IsSaveConfirmed===false && isRecipeModified===true;" style="margin: left 1px;0px; display:inline-block; width:80%">
        <div class="msg"  style="text-align: center;">
            Recipe record has been modified
        </div>
        <div class="skipLine">&nbsp;</div>
        <button id='but_1' class="sizeButtons" style='margin-left:30%;' (click)="ConfirmSave()"> Save</button> &nbsp;&nbsp;or
        <button id='but_2' class="sizeButtons" (click)="CancelRecord()"> Cancel</button>
        <div class="msg"  ><br>{{message}} </div>
    </div>

    
    <div *ngIf="IsSaveConfirmed===true" style="margin-left:20px; width:80%">
        <div class="msg"  >
            Please enter the name of the file you want to save your data in :
        </div>
        <form  [formGroup]="SpecificForm" >
            <input type='text' style='margin-left:20px; background-color:lightgrey;' formControlName="FileName" >
            <br><br>
            <button id='but_3' class="sizeButtons" (click)="SaveRecord()">Confirm</button>
            <button id='but_4' class="sizeButtons" (click)="CancelSave()"> Cancel</button>
        </form>
        <br><br>
    </div>  
    <div *ngIf="isCreateRecipeName===true">
        <span style="color:blue; font-size:14px; width:60px; margin-left:10px;"> Create name recipe </span>
        <input type="text" [value]="temporaryNameRecipe" id="input" (input)="nameRecipe($event)"
            style="margin-left:10px; width:120px; height:25px; color:blue; ">
            <button id='save' class="sizeButtons" style="margin-left:10px;" (click)="nameRecipe($event)" >Save</button>
            <button id='clear' class="sizeButtons" style="margin-left:10px;" (click)="nameRecipe($event)" >Clear</button>
            <button id='cancel' class="sizeButtons" style="margin-left:10px;" (click)="nameRecipe($event)" >Cancel</button>
    </div>
    <div *ngIf="isCreateRecipeName===false">
        <!-- TITLE-->
        <div class="titleHeader" style="width:100%; background-color:cyan;"> 
        <span *ngIf="yourLanguage==='FR'">
            Type de recette: 
            <input type="text" (input)="onInputType($event)" id='Fr' class='theType' value="{{recipeFile.recipe[recordRecipe].typeFr}}">
        </span>
        <span *ngIf="yourLanguage==='UK'">
            Type of recipe: 
            <input type="text" (input)="onInputType($event)" id='En' class='theType' value="{{this.recipeFile.recipe[this.recordRecipe].typeEn}}">
        </span>
        </div>
        <div class="titleName"> 
 
            <div class="dropdown" *ngIf="isListTypeFr===true || isListTypeEn===true">
                <div [ngStyle]="styleBoxListType">
                    <div   [ngStyle]="styleBoxOptionListType"  >
                        <li *ngFor="let tab of tabDropdownType; let m=index;" 
                                class="Straight-options "  [ngClass]=" {'colorEven': m % 2 ===0, 'colorOdd': m % 2 !==0}" 
                                    (click)="onDropdownListType($event)" id="listType" [value]="tab.name">{{tab.name}}   
                        </li>
                    </div>
                </div>
            </div>
            
            <div style="margin-left:80px;" class="circle"  (click)="onAction($event)"  id='ActionRecipe'>A</div>  
            <div class="dropdown" *ngIf="isActionRecipe===true ">
                <div [ngStyle]="styleBoxAction">
                    <div   [ngStyle]="styleBoxOptionAction"  >
                        <li *ngFor="let tab of tabActionRecipe; let m=index;" 
                                class="Straight-options "  [ngClass]=" {'colorEven': m % 2 ===0, 'colorOdd': m % 2 !==0}" 
                                    (click)="afterDropDown($event)" id="ActionRecipe" [value]="m">{{tab}}   
                        </li>
                    </div>
                </div>
            </div>
            <div *ngIf="isChangeRecipeName===true ">
                <div class="dropdown ">
                    <div  [ngStyle]="styleBoxChangeName">
                        <div  [ngStyle]="styleBoxOptionChangeName" >
                           
                                <div class="changeAllItems" > Name to change#{{recipeFile.recipe[recordRecipe].name}}</div>
                                <div class="changeAllItems">  New name: 
                                        <input type="text" [value]="temporaryNameRecipe" id="input"  class="changeNameNew" (input)="onChangeName($event)">
                                </div>
                                <br>
                                <button id='but_3' id="save" class="sizeButtons"  style="margin-left:50px;" (click)="onChangeName($event)">Confirm</button>
                                <button id='but_4' id="cancel" class="sizeButtons" (click)="onChangeName($event)"> Cancel</button>
                           
                        </div>
                    </div>
                </div>
            </div>
        
            <div class="dropdown" *ngIf="isDeleteRecipe===true">
                <div [ngStyle]="styleBox" >
                    <div  [ngStyle]="styleBoxOption ">
            
                        <div style="width:100%; color:blue; font-size:14px; text-align: center;">Confirm the deletion of recipe {{delMsg}}</div> 
                        <div   style='margin-left:40px; margin-top:8px; width:60%; display:inline-block; 
                                            background-color:lightgrey;   float:left;  height:25px;'>
                            <input  style='margin-left:10px;' (click)='delRecipe($event)' type="radio"   id="YesDelConfirm"  value="Y" >&nbsp;&nbsp;Yes
                            <input  style='margin-left:10px;' (click)='delRecipe($event)' type="radio"   id="NoDelConfirm"  value="N">  &nbsp;&nbsp;No 
                             
                        </div>
                        <div class="skipLine">&nbsp; </div> 
                    </div>
                </div>
            </div>

            <div style='margin-left:15px; display:inline-block; color:blue; font-weight:bold; margin-top:-20px;'>{{recipeFile.recipe[recordRecipe].name}} </div>
            
            <div class="menuBox" id="listRecipe" (click)="onAction($event)">
            <mat-icon  class="menu"  id="listRecipe" (click)="onAction($event)" >
               menu
            </mat-icon>
        </div>

        </div>

        <div *ngIf="isListRecipe===true ">
            <div class="dropdown ">
                <div [ngStyle]="styleBoxListRecipe ">                        
                    <div   [ngStyle]="styleBoxOptionListRecipe"  >
                        <li *ngFor="let tab of tabRecipe; let m=index;" 
                                class="Straight-options "  [ngClass]=" {'colorEven': m % 2 ===0, 'colorOdd': m % 2 !==0}" 
                                        (click)="afterDropDown($event)" id="selRecipe" [value]="m">{{tab.name}}   
                        </li>
                    </div>
                </div>
            </div>
        </div>
        

        <div *ngFor="let StdPer of theStdPersoDisplay; let j=index;">                
                            <!-- Header table -->
            <!-- Display the title for STANDARD and Visibility on/off icon -->
            <div *ngIf="j===0"  style="width:100%;  background-color:lightgrey;  height:44px; border : solid 2px blue;">
                <div style='font-size:16px; width:50%;  text-align: right;  margin-top:8px;  display:inline-block; color:blue '>Standard
                </div>
                <span  *ngIf='theStdPersoDisplay[0]==="Y"'>
                    <mat-icon style=" color: red;" class="eye" id="eyeStd" (click)='selStdPer($event)' >
                        visibility_off
                    </mat-icon>
                </span>
                <span  *ngIf='theStdPersoDisplay[0]==="N"'>
                    <mat-icon style=" color: blue;" class="eye" id="eyeStd" id="eyeStd" (click)='selStdPer($event)' >
                        visibility
                    </mat-icon>
                </span>
                    <!--
                    <mat-icon aria-hidden="false"  fontIcon="visibility_off"  style=" color:green; vertical-align: middle;"></mat-icon>
                    -->
            </div>
           
            <!-- Display the title for PERSONNALIZED and Visibility on/off  icon-->
            <div *ngIf="j===1"  style="width:100%;  background-color:lightgrey;  height:44px; border : solid 2px blue;">
                <div style='font-size:16px; width:50%;  text-align: right;  margin-top:8px;  display:inline-block; color:blue'>Personnalized
                </div>
                <span  *ngIf='theStdPersoDisplay[1]==="Y"'>
                    <mat-icon style=" color: red;" class="eye" id="eyeStd" id="eyePerso" (click)='selStdPer($event)' >
                        visibility_off
                    </mat-icon>
                </span>
                <span  *ngIf='theStdPersoDisplay[1]==="N"'>
                    <mat-icon style=" color: blue;" class="eye" id="eyeStd" id="eyePerso" (click)='selStdPer($event)' >
                        visibility
                    </mat-icon>
                </span>
                    <!--
                    <mat-icon aria-hidden="false"  fontIcon="visibility_off"  style=" color:green; vertical-align: middle;"></mat-icon>
                    -->
            </div>
     

  
            <div *ngIf="(j===0 && theStdPersoDisplay[0]==='Y') || (j===1 && theStdPersoDisplay[1]==='Y')">
                <div style="width:20%;" class="titleHeader">Action</div>
                <div style="width:40%;"  class="titleHeader" >Ingredients</div>
                <div style="width:20%; " class="titleHeader">Quantity</div>
                <div style="width:20%; " class="titleHeader">Unit</div>
            </div>
        <!-- ====== Display record related to STANDARD recipe ====== -->
            <div *ngIf="theStdPersoDisplay[0]==='Y' && j===0">
                <div   *ngFor="let theRecipe of recipeFile.recipe[recordRecipe].data; let i=index">
                    <div id="posAfterTitle">
                        <div  style="width:20%;" class="theRow">
                            <div class="circle"  (click)="onAction($event)"  id='Action-{{i}}'>A</div>  
                            <div *ngIf="tabDialog[prevDialog]===true && i===idNb && idText==='Action'">
                                <div class="dropdown ">
                                    <div class="Straight-content"  [ngStyle]="{ 'width.px':50, 'height.px': theHeight  ,'margin-left.px': posLeftDropDown, 'margin-top.px':posTopDropDown }">
                                        <div  class="StraightDropDown " [ngStyle]="{ 'height.px': theHeight  ,'margin-left.px': 5}"  >
                                            <li *ngFor="let tab of listActions; let m=index;" 
                                                    class="Straight-options "  [ngClass]=" {'colorEven': m % 2 ===0, 'colorOdd': m % 2 !==0}" 
                                                        (click)="afterDropDown($event)" id="Action" [value]="m">{{tab}}   
                                            </li>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- ====== DROPDOWN - CHANGE VALUE ====== -->
                            <div *ngIf="isChangeValueForAll===true && i===idNb">
                            
                                <div class="dropdown ">
                                    <div  [ngStyle]="styleBoxChangeAll">
                                        <div  [ngStyle]="styleBoxOptionChangeAll" >
                                            <form  [formGroup]="SpecificForm" >
                                                <div class="changeAllItems" style="text-align: center;"> item#{{idNb+1}}: {{currentIngr}}</div>
                                                <div class="changeAllItems"> Current value :
                                                    <span class="changeAllCurrentValue"> {{currentValue}}</span>
                                                </div>
                                                <div class="changeAllItems">  New value: 
                                                        <input type="text" formControlName="changeValue" class="changeAllNewValue">
                                                </div>
                                                <br>
                                                <button id='but_3' id="save" class="sizeButtons"  style="margin-left:50px;" (click)="onChangeValues($event)">Confirm</button>
                                                <button id='but_4' id="cancel" class="sizeButtons" (click)="onChangeValues($event)"> Cancel</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- ====== Display Ingredient and DROPDOWN with list of potential ingredients ====== -->
                        <div style="width:40%;"  class="theRow" >
                            <input style="width:98%;" class="input" type="text" id="ingr-{{i}}"  (mouseup)="onMouseUp($event)"   (input)="modifInput($event)" value="{{theRecipe.ingr}}">
                            <div *ngIf="isIngrDropDown===true && i===idNb && idText==='ingr'">
                                <div class="dropdown ">
                                    <div [ngStyle]="styleBox">
                                        <div  [ngStyle]="styleBoxOption">
                                            <li *ngFor="let tab of tabListCalFat; let m=index;" 
                                                    class="Straight-options "  [ngClass]=" {'colorEven': m % 2 ===0, 'colorOdd': m % 2 !==0}" 
                                                        (click)="modifInput($event)" id="sel{{ingrType}}-{{i}}" [value]="m">{{tab.name}} - serving: {{tab.serving | number:'1.0-0'}}  {{tab.unit}}   
                                            </li>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="width:20%; " class="theRow">
                            <input style="width:98%;" class="input" type="text" id="quantity-{{i}}"   (input)="modifInput($event)" value="{{theRecipe.quantity}}">
                        </div>
                        <div style="width:20%; " class="theRow">
                            <input style="width:98%;" class="input" type="text" id="unit-{{i}}"   (input)="modifInput($event)" value="{{theRecipe.unit}}">
                        </div>
                    
                    </div>
                </div>
                <div style ="width:100%; display:inline-block; text-align: center; color:blue; background-color: lightgrey; border:solid 1px blue;">Ustensiles Std</div>
                <div style ="width:100%; display:inline-block; color:blue; background-color: lightgrey; border:solid 1px blue;">
    
                    <textarea  class="input" (input)="modifInput($event)" style="width: 100%; overflow-y:scroll; display:inline-block;  word-wrap: break-word; " 
                    [ngStyle]="{'height.px':heightMateriel, 'max-height.px':maxHeightCommBox}" id="materiel" value="{{recipeFile.recipe[recordRecipe].materiel}}">
                    </textarea>
                </div>
                <div style ="width:100%; display:inline-block; text-align: left; color:blue; background-color: lightgrey; border:solid 1px blue;">
                    <div style="margin-left:35%;" class="circle"  (click)="onAction($event)"  id='ActionComments'>A</div>  
                    <span style="margin-left:20px;">Comments Std</span>
                    
                    <div *ngIf="isActionComments===true && idText==='ActionComments'">
                        <div class="dropdown ">
                            <div class="Straight-content" style="overflow-y:scroll;" [ngStyle]="{ 'width.px':240, 'height.px': theHeight  ,'margin-left.px': posLeftDropDown, 'margin-top.px':posTopDropDown }">
                                <div  class="StraightDropDown " style="overflow-y:scroll;" [ngStyle]="{ 'height.px': theHeight  - 60,'margin-left.px': 5}"  >
                                    <li *ngFor="let tab of tabActionComments; let m=index;" 
                                            class="Straight-options "  [ngClass]=" {'colorEven': m % 2 ===0, 'colorOdd': m % 2 !==0}" 
                                                (click)="dropdownComments($event)" id="comments" [value]="m">{{tab}}   
                                    </li>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style ="width:100%; display:inline-block; color:blue; background-color: lightgrey; border:solid 1px blue;">
                    <div class="flag " (click)="translateComments('UkToFr')"> <span><img   style="width:20px; height:20px; margin:7px;"  src="./assets/FlagFrance.png" ></span></div>

                    <textarea  class="input" (input)="modifInput($event)" style="overflow-y:scroll; display:inline-block; width:100%;  word-wrap: break-word; color:blue; background-color: lightgrey; border:solid 1px blue;" 
                    [ngStyle]="{'height.px':heightComments, 'max-height.px':maxHeightCommBox}" id="comments" value="{{recipeFile.recipe[recordRecipe].comments}}">
                    </textarea>
                </div>
                <div style ="width:100%; display:inline-block; color:blue; background-color: white; border:solid 1px blue;"> 
                    <div class="flag" (click)="translateComments('FrToUk')"> <span><img   style="width:20px; height:20px; margin:7px;"  src="./assets/FlagUK.png" ></span></div>

                    <textarea  class="input" (input)="modifInput($event)" style="overflow-y:scroll; display:inline-block; width:100%;  word-wrap: break-word; color:blue; background-color: lightgrey; border:solid 1px blue;" 
                    [ngStyle]="{'height.px':heightCommentsEn, 'max-height.px':maxHeightCommBox}" id="commentsEn" value="{{recipeFile.recipe[recordRecipe].commentsEn}}">
                    </textarea>
                </div>
                <!-- ====== NUTRITION FACTS FOR STANDARD ====== -->
                <div *ngIf="isCreateRecipeName===false">
                    <div style="width:98%; margin-left:10px; display:inline-block; border:solid 2px black; ">
                        <div class="skipLine">&nbsp;</div>
                        
                        <div style="width:100%; height:10px;  margin-top:-20px; margin-left:10px; display:inline-block; font-size:22px;  text-align: center; color:green;">
                            Nutrition Facts Std
                            <span  *ngIf='eyeNutritionFact[0]==="Y"'>
                                <mat-icon style=" color: red;" class="eyeNutrition" id="eyeStd" (click)='selEyeNutFact($event)' >
                                    visibility_off
                                </mat-icon>
                            </span>
                            <span  *ngIf='eyeNutritionFact[0]==="N"'>
                                <mat-icon style=" color: blue;" class="eyeNutrition" id="eyeStd"  (click)='selEyeNutFact($event)' >
                                    visibility
                                </mat-icon>
                            </span>
                           
                        </div>
                        <span  *ngIf='eyeNutritionFact[0]==="Y"'>
                        <div class="skipLine">&nbsp;</div>
                        <div class="nutritionName even">Calories</div>
                        <div  class="nutritionNb even">{{recipeFile.recipe[recordRecipe].nutrition.calories | number:'1.2-2'}}</div>
                        <div class="nutritionName odd">Proteins</div>
                        <div  class="nutritionNb odd">{{recipeFile.recipe[recordRecipe].nutrition.proteins | number:'1.2-2'}}</div>
                        <div class="nutritionName even">Carbs & Sugar</div>
                        <div  class="nutritionNb even">{{recipeFile.recipe[recordRecipe].nutrition.carbs | number:'1.2-2'}}</div>
                        <div class="nutritionName odd">Cholesterol</div>
                        <div  class="nutritionNb odd">{{recipeFile.recipe[recordRecipe].nutrition.cholesterol | number:'1.2-2'}}</div>
                        <div class="nutritionName even">Saturated Fat</div>
                        <div  class="nutritionNb even">{{recipeFile.recipe[recordRecipe].nutrition.satFat | number:'1.2-2'}}</div>
                        <div class="skipLine">&nbsp;</div>
                        <div class="nutritionTotal">Total weight: {{recipeFile.recipe[recordRecipe].nutrition.totalWeight | number:'1.2-2'}}  gram(s)</div>
                        <div class="skipLine">&nbsp;</div>
                        </span>
                    </div>
                </div>
            </div> <!-- if j==0 -->

            <!-- ====== Display record related to PERSONNALIZED recipe ====== -->
            <div *ngIf="theStdPersoDisplay[1]==='Y'&& j===1">
                <div   *ngFor="let theRecipe of recipeFile.recipe[recordRecipe].data; let i=index">
                    <div  style="width:20%;" class="theRow">
                        <div class="circle"  (click)="onAction($event)"  id='ActionPerso-{{i}}'>A</div>  
                        <div *ngIf="tabDialog[prevDialog]===true && i===idNb && idText==='ActionPerso'">
                            <div class="dropdown ">
                                <div class="Straight-content"  [ngStyle]="{ 'width.px':50, 'height.px': theHeight  ,'margin-left.px': posLeftDropDown, 'margin-top.px':posTopDropDown }">
                                    <div  class="StraightDropDown " [ngStyle]="{ 'height.px': theHeight  ,'margin-left.px': 5}"  >
                                        <li *ngFor="let tab of listActions; let m=index;" 
                                                class="Straight-options "  [ngClass]=" {'colorEven': m % 2 ===0, 'colorOdd': m % 2 !==0}" 
                                                    (click)="afterDropDown($event)" id="ActionPerso" [value]="m">{{tab}}   
                                        </li>
                                    </div>
                                </div>
                            </div>
                        </div>

                        
                        <div *ngIf="isChangeValueForAllPerso===true && i===idNb">
                            
                            <div class="dropdown ">
                                <div  [ngStyle]="styleBoxChangeAll">
                                    <div  [ngStyle]="styleBoxOptionChangeAll" >
                                        <form  [formGroup]="SpecificForm" >
                                            <div class="changeAllItems" style="text-align: center;"> item#{{idNb+1}}: {{currentIngr}}</div>
                                            <div class="changeAllItems"> Current value :
                                                <span class="changeAllCurrentValue"> {{currentValue}}</span>
                                            </div>
                                            <div class="changeAllItems">  New value: 
                                                    <input type="text" formControlName="changeValue" class="changeAllNewValue">
                                            </div>
                                            <br>
                                            <button id='but_3' id="save" class="sizeButtons"  style="margin-left:50px;" (click)="onChangeValues($event)">Confirm</button>
                                            <button id='but_4' id="cancel" class="sizeButtons" (click)="onChangeValues($event)"> Cancel</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ====== Display Ingredient and DROPDOWN with list of potential ingredients ====== -->
                    <div style="width:40%;"  class="theRow" >
                        <input style="width:98%;" class="input" type="text" id="ingrPerso-{{i}}" (mouseup)="onMouseUp($event)"  (input)="modifInput($event)" value="{{recipeFile.recipe[recordRecipe].dataPerso[i].ingr}}">
                        <div *ngIf="isIngrDropDown===true && i===idNb && idText==='ingrPerso'">
                            <div class="dropdown ">
                                <div [ngStyle]="styleBox">
                                    <div  [ngStyle]="styleBoxOption">
                                        <li *ngFor="let tab of tabListCalFat; let m=index;" 
                                                class="Straight-options "  [ngClass]=" {'colorEven': m % 2 ===0, 'colorOdd': m % 2 !==0}" 
                                                    (click)="modifInput($event)" id="sel{{ingrType}}-{{i}}"  [value]="m">{{tab.name}} - serving: {{tab.serving | number:'1.0-0'}}  {{tab.unit }}
                                        </li>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                    <div style="width:20%; " class="theRow">
                        <input style="width:98%;" class="input" type="text" id="quantityPerso-{{i}}"   (input)="modifInput($event)" value="{{recipeFile.recipe[recordRecipe].dataPerso[i].quantity}}">
                    </div>
                    <div style="width:20%; " class="theRow">
                        <input style="width:98%;" class="input" type="text" id="unitPerso-{{i}}"  (input)="modifInput($event)" value="{{recipeFile.recipe[recordRecipe].dataPerso[i].unit}}">
                    </div>
                </div> <!-- *ngFor -->
                <div style ="width:100%; display:inline-block; text-align: center; color:blue; background-color: lightgrey; border:solid 1px blue;">Ustensiles Perso</div>
                <div style ="width:100%; display:inline-block; color:blue; background-color: lightgrey; border:solid 1px blue;">
                    <textarea  class="input" (input)="modifInput($event)" style="width:100%; overflow-y:scroll; display:inline-block;  word-wrap: break-word; "
                     [ngStyle]="{'height.px':heightMaterielPerso, 'max-height.px':maxHeightCommBox}"
                                id="materielPerso" value="{{recipeFile.recipe[recordRecipe].materielPerso}}">
                    </textarea>
                </div>
    
                <div style ="width:100%; display:inline-block; text-align: left; color:blue; background-color: lightgrey; border:solid 1px blue;">
                    <div style="margin-left:35%;" class="circle"  (click)="onAction($event)"  id='ActionCommentsPerso'>A</div>  
                    <span style="margin-left:20px;">Comments Perso</span>
                    <div *ngIf="isActionComments===true && idText==='ActionCommentsPerso'">
                        <div class="dropdown ">
                            <div class="Straight-content"  [ngStyle]="{ 'width.px':50, 'height.px': theHeight  ,'margin-left.px': posLeftDropDown, 'margin-top.px':posTopDropDown }">
                                <div  class="StraightDropDown "  style="overflow-y:scroll;" [ngStyle]="{ 'height.px': theHeight  - 80 ,'margin-left.px': 5}"  >
                                    <li *ngFor="let tab of tabActionCommentsPerso; let m=index;" 
                                            class="Straight-options "  [ngClass]=" {'colorEven': m % 2 ===0, 'colorOdd': m % 2 !==0}" 
                                                (click)="dropdownComments($event)" id="commentsPerso" [value]="m">{{tab}}   
                                    </li>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <textarea  class="input" (input)="modifInput($event)" style="overflow-y:scroll; display:inline-block; width:100%;  word-wrap: break-word; color:blue; background-color: lightgrey; border:solid 1px blue;" 
                    [ngStyle]="{'height.px':heightCommentsPerso, 'max-height.px':maxHeightCommBox}" id="commentsPerso" value="{{recipeFile.recipe[recordRecipe].commentsPerso}}">
                    </textarea>
                </div>
                <!-- ====== NUTRITION FACTS FOR PERSO ====== -->
                <div *ngIf="isCreateRecipeName===false && recipeFile.recipe[recordRecipe].nutritionPerso.totalWeight">
                    <div style="width:98%; margin-left:10px; display:inline-block; border:solid 2px black; ">
                        <div class="skipLine">&nbsp;</div>
                        
                        <div style="width:100%; margin-top:-20px;margin-left:10px; display:inline-block; font-size:22px;  text-align: center; color:green;">
                            Nutrition Facts Perso
                            <span  *ngIf='eyeNutritionFact[1]==="Y"'>
                                <mat-icon style=" color: red;" class="eyeNutrition" id="eyePerso" (click)='selEyeNutFact($event)' >
                                    visibility_off
                                </mat-icon>
                            </span>
                            <span  *ngIf='eyeNutritionFact[1]==="N"'>
                                <mat-icon style=" color: blue;" class="eyeNutrition" id="eyePerso"  (click)='selEyeNutFact($event)' >
                                    visibility
                                </mat-icon>
                            </span>
                           
                        </div>
                        <span  *ngIf='eyeNutritionFact[1]==="Y"'>
                            <div class="skipLine">&nbsp;</div>
                            <div  class="nutritionName even">Calories</div>
                            <div  class="nutritionNb even">{{recipeFile.recipe[recordRecipe].nutritionPerso.calories | number:'1.2-2'}} </div>
                            <div class="nutritionName odd">Proteins</div>
                            <div  class="nutritionNb odd">{{recipeFile.recipe[recordRecipe].nutritionPerso.proteins | number:'1.2-2'}}</div>
                            <div class="nutritionName even">Carbs & Sugar</div>
                            <div  class="nutritionNb even"> {{recipeFile.recipe[recordRecipe].nutritionPerso.carbs | number:'1.2-2'}}</div>
                            <div class="nutritionName odd">Cholesterol</div>
                            <div  class="nutritionNb odd">{{recipeFile.recipe[recordRecipe].nutritionPerso.cholesterol | number:'1.2-2'}}</div>
                            <div class="nutritionName even">Saturated Fat</div>
                            <div  class="nutritionNb even">{{recipeFile.recipe[recordRecipe].nutritionPerso.satFat | number:'1.2-2'}}</div>
                            <div class="skipLine">&nbsp;</div>
                            <div class="nutritionTotal">Total weight: {{recipeFile.recipe[recordRecipe].nutritionPerso.totalWeight | number:'1.2-2'}} gram(s)</div>
                            <div class="skipLine">&nbsp;</div>
                        </span>
                    </div>
                </div>
            </div> <!-- if j===1-->
        </div>
    </div>
</div>
<div class="skipLine">&nbsp;</div>
<div class="skipLine">&nbsp;</div>
